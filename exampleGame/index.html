
<html>
    <body style="margin: 0px; padding: 0px;">


            <canvas id="gc" width="400" height="400" style="margin: 0px; padding: 0px;"></canvas>
            <script>
                                canvH=document.getElementById("gc");
                                canvH.height = window.innerHeight;
                                canvH.width = window.innerWidth;
            window.onload=function() {
                canv=document.getElementById("gc");
                canv.height = window.innerHeight;
                canv.width = window.innerWidth;
                ctx=canv.getContext("2d");
                document.addEventListener("keydown",keyPush);
                window.requestAnimationFrame(animation);

                setInterval(game,1000/15);
                var thaButtonIs = document.querySelector("#thaButtonIs");
    var thaGamePadIs = document.querySelector("#thaGamePadIs");
}
window.addEventListener("gamepadconnected", function(e) {
    window.setInterval(function(){
    var gp = navigator.getGamepads()[0];
			for(var button in gp.buttons){
          if(gp.buttons[button].pressed){
              //12 up   13 down 15 right 14 left
              console.log('hello', button )
            //   thaButtonIs.innerHTML = button;
              switch(button) {
                    case "14":
                        console.log('left')
                        xv=-1;yv=0;
                        break;
                    case "12":
                        console.log('up')
                        xv=0;yv=-1;
                        break;
                    case "15":
                        console.log('right')
                        xv=1;yv=0;
                        break;
                    case "13":
                        console.log('down')
                        xv=0;yv=1;
                        break;
                }
              
          }
      }
    },1);
});


            
            function animation(e){
                console.log('eee', e);
            }
            px=py=10;
            gs=tc=20;
            ax=ay=15;
            xv=yv=0;
            trail=[];
            tail = 5;
            function game() {
                px+=xv;
                py+=yv;
                if(px<0) {
                    px= tc-1;
                }
                if(px>tc-1) {
                    px= 0;
                }
                if(py<0) {
                    py= tc-1;
                }
                if(py>tc-1) {
                    py= 0;
                }
                ctx.fillStyle="black";
                ctx.fillRect(0,0,canv.width,canv.height);
            
                ctx.fillStyle="lime";
                for(var i=0;i<trail.length;i++) {
                    ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
                    if(trail[i].x==px && trail[i].y==py) {
                        tail = 5;
                    }
                }
                trail.push({x:px,y:py});
                while(trail.length>tail) {
                trail.shift();
                }
            
                if(ax==px && ay==py) {
                    tail++;
                    ax=Math.floor(Math.random()*tc);
                    ay=Math.floor(Math.random()*tc);
                }
                ctx.fillStyle="red";
                ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);
            }
            function keyPush(evt) {
                console.log('hello', evt);
                // switch(evt.keyCode) {
                //     case 37:
                //         console.log('1 left')
                //         xv=-1;yv=0;
                //         break;
                //     case 38:
                //         console.log('2 up')
                //         xv=0;yv=-1;
                //         break;
                //     case 39:
                //         console.log('3 right')
                //         xv=1;yv=0;
                //         break;
                //     case 40:
                //     console.log('4 dow')
                    
                //         xv=0;yv=1;
                //         break;
                // }
            }
            </script>





        </body>
    </html>
