<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>CapMan</title>    
    <link rel="stylesheet" href="vendor/coverflow.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="vendor/jquery.js"></script>
    <script src="vendor/coverflow.js"></script>
  </head>
  <body>
    <div>
        <div id="coverflow">
            <!-- <img data-path="games/break-down/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-Capman-BreakOut.png" /> -->
            <img data-path="games/phaser-league/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-Capman-Phaser-League.png" />
            <img data-path="games/capmancrashingbugs/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-Capman.png" />
            <!-- <img data-path="games/capball/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-Capman-Pinball.png" /> -->
            <img data-path="games/capmangalaxy/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-Capman-Galaxy.png" />
            <img data-path="games/keymapper/index.html" height="350px" width="350px" src="gameAssets/covers/Cover-settings.png" />
        </div>
    </div>
    <div id="coverflow-slider"></div>
   <script>
        var keys = JSON.parse(localStorage.getItem("capManKeys"));
        if(keys === null) {
           keys = {
                playerOne: {
                    up: 87,
                    down: 83,
                    left: 65,
                    right: 68,
                    green: 85
                }
            }
        }

       $(function() {
            $('#coverflow').coverflow({
                active: 2,
                scale: 0.8,
                overlap:0.1,
                select: function(event, ui){
                    console.log('here');
                }
            });
            $('#coverflow img').click(function() {
                if( ! $(this).hasClass('ui-state-active')){
                    return;
                } 
                $('#coverflow').coverflow('next');
            });
            });

            const cntrl = {
                left: keys.playerOne.left,
                right: keys.playerOne.right,
                up: keys.playerOne.up,
                down: keys.playerOne.down,
                fire: keys.playerOne.green
            }

            document.addEventListener("keydown",(evt) =>{
                switch(evt.keyCode) {
                    case cntrl.left:
                        $('#coverflow').coverflow('prev');
                        break;
                    case cntrl.up:
                        
                        break;
                    case cntrl.right:
                        $('#coverflow').coverflow('next');
                        break;
                    case cntrl.down:
                       
                        break;
                    case cntrl.fire:
                        window.location.href = $('.ui-state-active').attr('data-path');
                        break; 
                }
            });


   </script> 

<!-- 


      <header>
        <h1>CapMan</h1>
      </header>

      <main>
          <div class="game">
              <a class="gameAnchor" id="1-1" href="exampleGame/index.html">
                  <img src="gameAssets/snake/snake.png" alt="Snake logo" />
              </a>
          </div>
          <div class="game" >
              <a class="gameAnchor" id="1-2" href="games/capmangalaxy/index.html">
                  <img src="gameAssets/spaceInvaders/invade.png" alt="Mario logo" />
              </a>
          </div>
          <div class="game" >
              <a class="gameAnchor" id="1-3" href="games/phaser-league/index.html">
                  <img src="gameAssets/phaserLeague/phaser.PNG" alt="phaser-league" />
              </a>
          </div>
          <div class="game" >
              <a class="gameAnchor" id="2-1" href="games/breakout/index.html">
                  <img src="gameAssets/breackOut/breack.png" alt="Mario logo" />
              </a>
          </div>
          <div class="game" >
              <a class="gameAnchor" id="2-2" href="#">
                  <img src="gameAssets/mario/Maniac-Mario-Screenshot.jpg" alt="Mario logo" />
              </a>
          </div>
          <div class="game" >
              <a class="gameAnchor" id="2-3" href="games/credits/index.html">
                  <img src="gameAssets/credits/credits.png" alt="credits" />
              </a>
          </div>

      </main>
    <script>
      // You can also require other files to run in this process
      // This file is required by the index.html file and will
// be executed in the renderer process for that window.
// All of the Node.js APIs are available in this process.


const cntrl = {
    left: 37,
    right: 39,
    up: 38,
    down: 40,
    fire: 17
}

let focussedCol = 1;
let focussedRow = 1;

const setFocus = (direction) => {
    if(direction) {
        switch(direction) {
            case 'LEFT':
                focussedCol--;
                if(focussedCol <= 0){
                    focussedCol = 3;
                }
            break;
            case 'RIGHT':
                focussedCol++;
                if(focussedCol >= 4){
                    focussedCol = 1;
                }
            break;
            case 'UP':
                focussedRow--;
                if(focussedRow <= 0){
                    focussedRow = 2;
                }
            break;
            case 'DOWN':
                focussedRow++;
                if(focussedRow >= 3){
                    focussedRow = 1;
                }
            break;
        }
    }
    document.getElementById(`${focussedRow}-${focussedCol}`).focus();
}

document.addEventListener("keydown",(evt) =>{
    switch(evt.keyCode) {
        case cntrl.left:
            setFocus('LEFT');
            break;
        case cntrl.up:
            setFocus('UP');
            break;
        case cntrl.right:
            setFocus('RIGHT');
            break;
        case cntrl.down:
            setFocus('DOWN');
            break;
        case cntrl.fire:
        document.getElementById(`${focussedRow}-${focussedCol}`).click();
            break; 
    }
});
    </script> -->


    
  </body>
</html>